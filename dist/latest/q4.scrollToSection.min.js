/*
Widget:   q4.scrollToSection
Version:  1.0.0
Compiled: 2017-11-06
*/
$.extend(!0,q4Defaults,{scrollToSection:function(a){var b=this.options;b.prevent_make_section_active=!1,{options:{menu:null,level:null,sectionFocusElem:".module_title",sectionClass:null,hrefId:null,scrollSpeed:b.scrollSpeed,scrollOnLoad:!1,updateHrefHash:!1,addActiveClass:!1,addScrollEvent:!1,scrollSectionOffset:0,offsetTopElem:[],offsetTopBreakPoint:[],getTopOffset:this.getTopOffset,addActiveClassScrollTolerance:0,closePopup:!1,popupShowingClass:"js--mobile",onClosePopup:function(){$(".layout").removeClass(this.popupShowingClass)},onClick:function(a,b){},onScrollEachSection:function(a,b){},onScrollActiveSection:function(a,b){}},init:function(a){var b=this,c=b.options;if($.extend(b.options,a),c.menu&&c.level&&c.sectionClass&&c.hrefId){var d=b._asignInitID();b._accesibleSection(),$(c.menu).attr("data-scrolltosection",d).addClass("js--scroll-to-section"),b._onClick(d),b._onScroll(d),b._onLoad(d)}},_accesibleSection:function(){$('[class*="'+this.options.sectionClass.substr(1)+'"]').attr("tabindex",0)},_asignInitID:function(){var a=this,b=a.options,c=b.hrefId.slice(1,-1),d="scrollTo"+c;return"scrollTo"+c+"-"+$('[data-scrolltosection^="'+d+'"]').length},_onClick:function(a){var b=this,c=b.options,d=$(c.menu).find(".selected > "+c.level+' > li > a[href*="'+c.hrefId+'"]');d.on("click."+a,function(a){var e=$(this),f=e.attr("href").split(c.hrefId).pop(),g=$(c.sectionClass+f);a.preventDefault(),c.onClick(a,{$selectedLevelItemsLinks:d,$clickedLink:e,$sectionSelected:g,sectionSpecificCls:f}),b._scrollTo(g),c.updateHrefHash&&(location.hash=c.hrefId+f),c.closePopup&&c.onClosePopup(),c.addActiveClass&&e.parent("li").addClass("js--active").siblings().removeClass("js--active")})},_onScroll:function(a){var c=this,d=c.options,e=!c._elemHasEventNamespace(window,"scroll",a);if(d.addActiveClass||d.updateHrefHash||d.addScroll){var f=d.sectionClass.substr(1),g=$('[class*="'+f+'"]'),h=$(d.menu).find(".selected > "+d.level),i=$(d.menu).find(" .selected > "+d.level+" > li");$(window).on("scroll."+a,function(a){!1===b.prevent_make_section_active&&c._make_section_active(a,g,h,i,f,e)})}},_onLoad:function(a){var b=this,c=b.options,d=!b._elemHasEventNamespace(window,"load",a);c.scrollOnLoad&&d&&$(window).on("load."+a,function(){b._scroll_to_sec_load(c.sectionClass,c.hrefId,c.scrollSpeed)})},_make_section_active:function(a,b,c,d,e,f){var g=this,h=g.options,i=$(window).scrollTop()+h.addActiveClassScrollTolerance,j=h.getTopOffset();b.each(function(){var g=$(this),k=g.offset().top-j-h.scrollSectionOffset,l=g.outerHeight(),m=i>=k,n=i<k+l,o={$sectionsElem:b,$selectedLevel:c,$selectedLevelItems:d,sectionCommonCls:e,hasEventNameSpace:f,$currentSection:g,curentScroll:i,currentSectionHeight:l,currentSectionOffsetTop:k,inViewPort:m,notAboveViewPort:n};if(f&&h.onScrollEachSection(a,o),m&&n){var p=g.attr("class").split(e).pop().split(" ").shift(),q=c.find('a[href$="'+p+'"]').parent();f&&h.onScrollActiveSection(a,$.extend({sectionSpecificCls:p,$selectedLevelActiveItem:q},o)),h.addActiveClass&&(d.removeClass("js--active"),q.addClass("js--active")),h.updateHrefHash&&f&&(location.hash=h.hrefId+p)}})},_scroll_to_sec_load:function(a,b,c){var d=this,e=d.options;if(location.hash.indexOf(e.hrefId)>-1){var f=$(e.sectionClass+location.hash.split(e.hrefId).pop());d._scrollTo(f)}},_elemHasEventNamespace:function(a,b,c){var d=$._data(a,"events"),e=!!d.hasOwnProperty(b)&&d[b],f=0;return e&&$.each(e,function(a,b){b.namespace.split("-").shift()==c.split("-").shift()&&f++}),f>0},_scrollTo:function(a){var c=this;o=c.options,history&&(history.scrollRestoration="manual"),b.prevent_make_section_active=!0,$("html,body").animate({scrollTop:a.offset().top-o.getTopOffset()-o.scrollSectionOffset},o.scrollSpeed,function(){$(this).is(":animated")||(b.prevent_make_section_active=!1,a.find(o.sectionFocusElem).focus())})}}.init(a)}});