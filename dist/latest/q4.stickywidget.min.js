/*
Widget:   q4.stickywidget
Version:  1.0.0
Compiled: 2017-11-11
*/
!function(a){a.widget("q4.stickyWidget",{options:{version:"1.0.0",stickyElem:null,layoutElem:".layout",layoutStickyActiveCls:null,disableBreakPoint:null,disableSwitchCondition:null,triggerOffset:0,triggerOffsetElemHeight:null,positionOffset:0,positionOffsetElemHeight:null,offsetTopElem:[],offsetTopBreakPoint:[],getTopOffset:q4Defaults.getTopOffset,disabled:!1,classes:{"js_sticky-elem":"","js--sticky":""},onSticky:function(a){},onUnSticky:function(a){},afterSticky:function(a){},beforeSticky:function(a){}},throttleDelay:0,isSticky:!1,isStickyDisabled:!1,_setWidgetProperties:function(){this.$layout=a(this.options.layoutElem),this.$stickyElem=this._setStickyElem()},_create:function(){this._setWidgetProperties(),this._addClass("js--sticky-trigger"),!1===this.options.disabled&&(this._stickyOnScroll(),this._stickyOnResize())},_init:function(){this._enableDisableSticky()},_setOption:function(a,b){if("disabled"===a){var c=this.option("disabled");!0===b&&!1===c?(this.isStickyDisabled=!1,this._removeStickyOnResize(),this._disableSticky()):!1===b&&!0===c&&(this.isStickyDisabled=!0,this._stickyOnResize(),this._enableDisableSticky(),this._addRemoveSticky())}this._super(a,b)},_destroy:function(){this._removeWidgetElemHeight(),this.removeSticky(),a(".js_sticky-appended",this.element).length&&a(".js_sticky-appended",this.element).children().unwrap()},_setStickyElem:function(){var b;if(null===this.options.stickyElem&&1===this.element.children().length)b=this.element.children().first();else if("append"===this.options.stickyElem||0===this.element.children().length)b=this.element.wrapInner('<div class="js_sticky-appended"></div>').children().first();else{if("string"!=typeof this.options.stickyElem||"append"===this.options.stickyElem)throw new Error('"stickyElem" options not corectly set');b=a(this.options.stickyElem,this.element).first()}return this._addClass(b,"js_sticky-elem"),b},_setOptionsResponsive:function(){if(this.options.responsive&&this.options.responsive.length&&null!==this.options.responsive)for(var a=0;a<=this.options.responsive.length;a++);},disableCondititon:function(){return this.options.disableSwitchCondition===this.window.width()<=this.options.disableBreakPoint},triggerOffset:function(){var a=this.options.getTopOffset()+this.options.triggerOffset;switch(this.options.triggerOffsetElemHeight){case"positive":a+=this.$stickyElem.outerHeight();break;case"negative":a-=this.$stickyElem.outerHeight()}return a},positionOffset:function(){var a=this.options.getTopOffset()+this.options.positionOffset;switch(this.options.positionOffsetElemHeight){case"positive":a+=this.$stickyElem.outerHeight();break;case"negative":a-=this.$stickyElem.outerHeight()}return a},_setStickyElemHeightToWidgetElem:function(a){this.element.css("height",this.$stickyElem.outerHeight())},_setWidgetElemHeight:function(){var b=a("img:visible",this.element);this._setStickyElemHeightToWidgetElem(),b.length&&this._on(b,{load:"_setStickyElemHeightToWidgetElem"})},_removeWidgetElemHeight:function(){this.element.css("height","")},addSticky:function(a){this.isSticky||this._trigger("onSticky",a),this.$stickyElem.css("top",this.positionOffset()+"px"),this.isSticky||(this.isSticky=!this.isSticky,this._addClass(this.$stickyElem,"js--sticky"),this.options.layoutStickyActiveCls&&this._addClass(this.$layout,this.options.layoutStickyActiveCls)),this._trigger("afterSticky",a)},removeSticky:function(a){this.isSticky&&this._trigger("onUnSticky",a),this.isSticky&&(this.isSticky=!this.isSticky,this._removeClass(this.$stickyElem.css("top",""),"js--sticky"),this.options.layoutStickyActiveCls&&this._removeClass(this.$layout,this.options.layoutStickyActiveCls)),this._trigger("beforeSticky",a)},_addRemoveSticky:function(a){var b=this.window.scrollTop(),c=this.element.offset().top-this.triggerOffset();this.disableCondititon()||(this._setWidgetElemHeight(),b>c?this.addSticky(a):this.removeSticky(a))},_stickyOnScroll:function(){this._on(this.window,{scroll:"_addRemoveSticky"})},_removeStickyOnScroll:function(){this._off(this.window,"scroll")},_disableSticky:function(){this.isStickyDisabled||(this.isStickyDisabled=!this.isStickyDisabled,this._removeStickyOnScroll(),this._removeWidgetElemHeight(),this.removeSticky())},_enableSticky:function(){this.isStickyDisabled&&(this._stickyOnScroll(),this.isStickyDisabled=!this.isStickyDisabled)},_enableDisableSticky:function(a){this.disableCondititon()?this._disableSticky():this._enableSticky()},_stickyOnResize:function(){this._on(this.window,{resize:this._throttle(function(a){this._addRemoveSticky(a),this._enableDisableSticky(a)},this.throttleDelay)})},_removeStickyOnResize:function(){this._off(this.window,"resize")},_throttle:function(a,b,c){b||(b=250);var d,e;return function(){var f=c||this,g=+new Date,h=arguments;d&&g<d+b?(clearTimeout(e),e=setTimeout(function(){d=g,a.apply(f,h)},b)):(d=g,a.apply(f,h))}}})}(jQuery);